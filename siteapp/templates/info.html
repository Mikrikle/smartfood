{% extends  'base.html' %}
{% load static %}

{% block header %}
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');


        data.addRows([
          ['Белки {{ count_values.nProteins }}г', {{ count_values.nProteins }}],
          ['Жиры {{ count_values.nFats }}г', {{ count_values.nFats }}],
          ['Углеводы {{ count_values.nCarbohydrates }}г', {{ count_values.nCarbohydrates }}],
        ]);

        var options = {'title':'',
                       'width':400,
                       'height':300};

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

      window.addEventListener('resize', function(event) {
        drawChart();
      }, true);
    </script>

    <script>
      let foodlist = [];
      {% for data in information %}
      foodlist.push("{{data.weight}}")
      {% endfor %}
      console.log(foodlist);
  </script>
{% endblock %}



{% block body %}
  <div id="chart_div" class="container text-center"></div>

  <div class="container d-flex p-2 bd-highlight flex-wrap justify-content-center col py-3 px-lg-5">
  {% for data in information %}
  <div class="fooditem infooditem gap-3">
    <h5> {{data.food.name}}</h5>
    <ul>
        <li>{{data.weight}}г.</li>
        <li>({{data.food.calories }} ККал)</li>
        <li>(Углеводы {{ data.food.carbohydrates }}г.)</li>
        <li>(Белки {{data.food.proteins}}г.)</li>
        <li>(Жиры {{data.food.fats}}г.)</li>
    </ul>
    <img class="img" src="{{data.food.img.url}}" alt={{data.food.name}} width="64" height="64">
  </div>

  {% endfor %}
</div>
{% endblock %}